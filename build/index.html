<!DOCTYPE HTML>
<html>

	<head>
		
		<meta charset="UTF-8">
	
		<link rel='stylesheet' type='text/css' href='static/style.css' />
		<link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet" /> 
		<link rel="shortcut icon" type='image/x-icon' href='./static/vulernbot.png'/>

		<meta name="viewport" content ="width=device-width,initial-scale=1,user-scalable=yes"/>

		<title>Chris Wood</title>
		
		<script type="text/javascript">
  			var Module = {
      				onRuntimeInitialized: function() {
            				resize(canvas.width , canvas.height);  
					gameLoop();
				}
    			};
		</script>
	
		{{{ SCRIPT }}}
	
		<script type='text/javascript' src='./other.js'></script>
	</head>

	<body>

		<canvas id='game_canvas' align='center'>Canvas is not supported</canvas>

		<div id='header_bar' align='center'>
			
			<img src='static/photo.jpg' border='5' height='15%' width='15%'>
			
			<div id='title' align='center'>	

				<h2>Chris Wood</h2>

				<hr style="width=25%;">

			</div>

			<div id='personal' align='center'>

				<h4>About Me</h4>
				<h4> <a href='static/ChrisResume.pdf' style='color:#000000;'>Resume</a>  </h4>
				<h4> <a href='https://github.com/crw5996' style='color:#000000;'>Projects</a> </h4>

			</div> 

		</div>

		<script>
			var images = [];		
			
			const colors = ['#ff0000' , '#00ff00' , '#0000ff' , '#fff835' , '#35fff4'];
			const canvas = document.getElementById('game_canvas'); 
			const context = canvas.getContext('2d');
					
			canvas.autofocus;

			context.canvas.width = window.innerWidth; 
			context.canvas.height = window.innerHeight;

			function processKey(key , action) {
			
				switch(key) {
				
					case "ArrowLeft": 
						_left(action);
						break; 

					case "ArrowRight": 
						_right(action);
						break; 

					case "ArrowUp": 
						_jump(1);
						break; 
				}
			
			}

			document.addEventListener("keydown" , e => processKey(e.key , 1)); 
			document.addEventListener("keyup" , e => processKey(e.key , 0)); 
			window.addEventListener('resize' , () => {resize();});

			var previousTime = null;
			var start = null; 

			var hiScore = initHS(); 

			var gameLoop = (timestamp) => {
				
				if (!previousTime) { 
					start = timestamp; 
					previousTime = timestamp; 
					loadImages();

					requestAnimationFrame(gameLoop);
					return;
				}

				context.clearRect(0,0,canvas.width,canvas.height); 

				var progress = (timestamp - previousTime) / 1000;

				var status = _update(progress); 
  
				context.beginPath(); 
				context.moveTo(canvas.width, canvas.height - 2); 
				context.lineTo(0 , canvas.height - 2);
			        context.stroke();
			 
				previousTime = timestamp;

				var score = _get_score(); 
				
				if (score > hiScore)
					hiScore = score; 

				if (status === -1) {
					sessionStorage.setItem(storageKey , hiScore); 
				}

				context.font = "30px Oswald"; 
				context.fillStyle = 'black'; 
				context.fillText("SCORE: " + score , canvas.width * .01 , canvas.height * .1); 
				context.fillText("HIGHSCORE: " + hiScore , canvas.width * .01 , canvas.height * .15); 

				requestAnimationFrame(gameLoop);

			};

		</script>

	</body>

</html>
